--- glib.orig/glib/gconstructor.h	Thu Feb 26 04:57:09 2015
+++ glib/glib/gconstructor.h	Fri Jul 24 23:26:31 2015
@@ -32,9 +32,10 @@
 
 #define G_DEFINE_CONSTRUCTOR(_func) \
   static void _func(void); \
-  static int _func ## _wrapper(void) { _func(); return 0; } \
+  static int _func ## _wrapper(void); \
   __pragma(section(".CRT$XCU",read)) \
-  __declspec(allocate(".CRT$XCU")) static int (* _array ## _func)(void) = _func ## _wrapper;
+  __declspec(allocate(".CRT$XCU")) static int (* _array ## _func)(void) = _func ## _wrapper; \
+  static int _func ## _wrapper(void) { _func(); return 0; _array ## _func(); }
 
 #define G_DEFINE_DESTRUCTOR(_func) \
   static void _func(void); \
